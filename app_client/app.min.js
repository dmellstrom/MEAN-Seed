!function(){function t(t,n){t.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/about",{templateUrl:"about/about.view.html",controller:"aboutCtrl",controllerAs:"vm"}).when("/register",{templateUrl:"/auth/register/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/profile",{templateUrl:"/profile/profile.view.html",controller:"profileCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),n.html5Mode(!0)}function n(t,n,e){t.protected=["/profile"],t.$on("$routeChangeStart",function(o,r,i){t.protected.indexOf(n.path())==-1||e.isLoggedIn()||n.path("/")})}angular.module("meanApp",["ngRoute"]),angular.module("meanApp").config(["$routeProvider","$locationProvider",t]).run(["$rootScope","$location","authentication",n])}(),function(){function t(){console.log("About controller")}angular.module("meanApp").controller("aboutCtrl",t)}(),function(){function t(t){var n=this;n.currentUser=t.currentUser(),console.log("Home controller")}angular.module("meanApp").controller("homeCtrl",t),t.$inject=["authentication"]}(),function(){function t(t,n){var e=this;e.user=null,n.getProfile().then(function(t){e.user=t}).catch(function(t){console.log(t)})}angular.module("meanApp").controller("profileCtrl",t),t.$inject=["$location","meanData"]}(),function(){function t(t,n){var e=this;e.credentials={email:"",password:""},e.onSubmit=function(){n.login(e.credentials).error(function(t){alert(t.message)}).then(function(){t.path("profile")})},loginForm.email.focus()}angular.module("meanApp").controller("loginCtrl",t),t.$inject=["$location","authentication"]}(),function(){function t(t,n){var e=this;e.credentials={name:"",email:"",password:""},e.onSubmit=function(){console.log("Submitting registration"),n.register(e.credentials).error(function(t){alert(t.message)}).then(function(){t.path("profile")})},registerForm.name.focus()}angular.module("meanApp").controller("registerCtrl",t),t.$inject=["$location","authentication"]}(),function(){function t(t,n){var e=function(t){n.localStorage["mean-claim"]=JSON.stringify(t)},o=function(){return!!n.localStorage["mean-claim"]&&JSON.parse(n.localStorage["mean-claim"])},r=function(){var t=o();return!!t&&t.exp>Date.now()/1e3},i=function(){if(r()){var t=o();return{email:t.email,name:t.name}}return!1},l=function(n){return t.post("/api/register",n).success(function(t){e(t.claim)})},a=function(n){return t.post("/api/login",n).success(function(t){e(t.claim)})},c=function(){return t.post("/api/logout").success(function(){n.localStorage.removeItem("mean-claim")})};return{isLoggedIn:r,currentUser:i,register:l,login:a,logout:c}}angular.module("meanApp").service("authentication",t),t.$inject=["$http","$window"]}(),function(){function t(t){var n=function(){return t.get("/api/profile").then(function(t){return t.data})};return{getProfile:n}}angular.module("meanApp").service("meanData",t),t.$inject=["$http"]}(),function(){function t(t,n,e,o){var r=this;r.currentUser=o.currentUser(),r.logout=function(){o.logout().then(function(){t.protected.indexOf(n.path())!=-1?n.path("/"):e.reload()})}}angular.module("meanApp").controller("navigationCtrl",t),t.$inject=["$rootScope","$location","$route","authentication"]}(),function(){function t(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}angular.module("meanApp").directive("navigation",t)}();
//# sourceMappingURL=app.min.js.map
